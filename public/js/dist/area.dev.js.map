{"version":3,"sources":["area.js"],"names":["document","addEventListener","urlParams","URLSearchParams","window","location","search","region","get","regionSelect","getElementById","value","fetchTouristSpots","currentPage","currentRegion","alert","searchRegion","page","loadingSpinner","style","display","fetch","method","headers","body","JSON","stringify","pageNo","response","ok","json","data","displayResults","items","totalCount","console","error","status","innerHTML","resultsDiv","length","list","createElement","forEach","item","listItem","dataset","contentid","img","src","firstimage","alt","title","width","height","itemInfo","className","textContent","addr","addr1","description","overview","appendChild","href","displayPagination","paginationDiv","totalPages","Math","ceil","maxPagesToShow","startPage","floor","max","endPage","min","prevButton","i","pageButton","backgroundColor","nextButton"],"mappings":"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","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const region = urlParams.get('region');\r\n\r\n    const regionSelect = document.getElementById('regionSelect');\r\n    if (region) {\r\n        regionSelect.value = region;\r\n        fetchTouristSpots();\r\n    }\r\n});\r\n\r\nlet currentPage = 1;\r\nlet currentRegion = '';\r\n\r\nfunction fetchTouristSpots() {\r\n    const region = document.getElementById('regionSelect').value;\r\n    if (!region) {\r\n        alert('Please select a region.');\r\n        return;\r\n    }\r\n    currentRegion = region;\r\n    currentPage = 1;\r\n    searchRegion(region, currentPage);\r\n}\r\n\r\nasync function searchRegion(region, page) {\r\n    const loadingSpinner = document.getElementById('loadingSpinner');\r\n    loadingSpinner.style.display = 'block';\r\n\r\n    try {\r\n        const response = await fetch('/search-region', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ region: region, pageNo: page })\r\n        });\r\n\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            displayResults(data.items, data.totalCount);\r\n        } else {\r\n            console.error('Error fetching data', response.status);\r\n            document.getElementById('results').innerHTML = 'Error fetching data';\r\n        }\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n        document.getElementById('results').innerHTML = 'Error fetching data';\r\n    } finally {\r\n        loadingSpinner.style.display = 'none';\r\n    }\r\n}\r\n\r\nfunction displayResults(items, totalCount) {\r\n    const resultsDiv = document.getElementById('results');\r\n    resultsDiv.innerHTML = '';\r\n\r\n    if (items.length > 0) {\r\n        const list = document.createElement('ul');\r\n        items.forEach(item => {\r\n            const listItem = document.createElement('li');\r\n            listItem.dataset.contentid = item.contentid;\r\n\r\n            const img = document.createElement('img');\r\n            img.src = item.firstimage || 'images/default-image.jpg';\r\n            img.alt = item.title || 'No title';\r\n            img.style.width = '100px';\r\n            img.style.height = '100px';\r\n\r\n            const itemInfo = document.createElement('div');\r\n            itemInfo.className = 'item-info';\r\n            const title = document.createElement('h3');\r\n            title.textContent = item.title || 'No title';\r\n            const addr = document.createElement('p');\r\n            addr.textContent = item.addr1 || 'No address available';\r\n            const description = document.createElement('p');\r\n            description.textContent = item.overview || 'No description available';\r\n\r\n            itemInfo.appendChild(title);\r\n            itemInfo.appendChild(addr);\r\n            itemInfo.appendChild(description);\r\n\r\n            listItem.appendChild(img);\r\n            listItem.appendChild(itemInfo);\r\n            listItem.addEventListener('click', () => {\r\n                window.location.href = `tourist-spot.html?contentId=${item.contentid}`;\r\n            });\r\n            \r\n\r\n            list.appendChild(listItem);\r\n        });\r\n        resultsDiv.appendChild(list);\r\n        displayPagination(totalCount);\r\n    } else {\r\n        resultsDiv.innerHTML = 'No results found';\r\n    }\r\n}\r\n\r\nfunction displayPagination(totalCount) {\r\n    const paginationDiv = document.getElementById('pagination');\r\n    paginationDiv.innerHTML = '';\r\n\r\n    const totalPages = Math.ceil(totalCount / 5);\r\n    const maxPagesToShow = 5;\r\n    let startPage = currentPage - Math.floor(maxPagesToShow / 2);\r\n    startPage = Math.max(startPage, 1);\r\n    let endPage = startPage + maxPagesToShow - 1;\r\n    endPage = Math.min(endPage, totalPages);\r\n\r\n    if (startPage > 1) {\r\n        const prevButton = document.createElement('button');\r\n        prevButton.innerHTML = '&laquo;';\r\n        prevButton.className = 'arrow';\r\n        prevButton.addEventListener('click', () => {\r\n            currentPage = startPage - 1;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        paginationDiv.appendChild(prevButton);\r\n    }\r\n\r\n    for (let i = startPage; i <= endPage; i++) {\r\n        const pageButton = document.createElement('button');\r\n        pageButton.textContent = i;\r\n        pageButton.addEventListener('click', () => {\r\n            currentPage = i;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        if (i === currentPage) {\r\n            pageButton.style.backgroundColor = '#0056b3';\r\n        }\r\n        paginationDiv.appendChild(pageButton);\r\n    }\r\n\r\n    if (endPage < totalPages) {\r\n        const nextButton = document.createElement('button');\r\n        nextButton.innerHTML = '&raquo;';\r\n        nextButton.className = 'arrow';\r\n        nextButton.addEventListener('click', () => {\r\n            currentPage = endPage + 1;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        paginationDiv.appendChild(nextButton);\r\n    }\r\n}"],"file":"area.dev.js"}