{"version":3,"sources":["area-detail.js"],"names":["document","addEventListener","fetch","then","response","json","data","regionSelect","getElementById","forEach","region","option","createElement","value","textContent","appendChild","error","console","currentPage","currentRegion","fetchTouristSpots","alert","searchRegion","page","loadingSpinner","style","display","method","headers","body","JSON","stringify","pageNo","ok","displayResults","items","totalCount","status","innerHTML","resultsDiv","length","list","item","listItem","dataset","contentid","img","src","firstimage","alt","title","width","height","itemInfo","className","addr","addr1","description","overview","window","location","href","displayPagination","paginationDiv","totalPages","Math","ceil","maxPagesToShow","startPage","floor","max","endPage","min","prevButton","i","pageButton","backgroundColor","nextButton"],"mappings":";;AAAAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAChDC,EAAAA,KAAK,CAAC,aAAD,CAAL,CACKC,IADL,CACU,UAAAC,QAAQ;AAAA,WAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,GADlB,EAEKF,IAFL,CAEU,UAAAG,IAAI,EAAI;AACV,QAAMC,YAAY,GAAGP,QAAQ,CAACQ,cAAT,CAAwB,cAAxB,CAArB;AACAF,IAAAA,IAAI,CAACG,OAAL,CAAa,UAAAC,MAAM,EAAI;AACnB,UAAMC,MAAM,GAAGX,QAAQ,CAACY,aAAT,CAAuB,QAAvB,CAAf;AACAD,MAAAA,MAAM,CAACE,KAAP,GAAeH,MAAf;AACAC,MAAAA,MAAM,CAACG,WAAP,GAAqBJ,MAArB;AACAH,MAAAA,YAAY,CAACQ,WAAb,CAAyBJ,MAAzB;AACH,KALD;AAMH,GAVL,WAWW,UAAAK,KAAK;AAAA,WAAIC,OAAO,CAACD,KAAR,CAAc,4BAAd,EAA4CA,KAA5C,CAAJ;AAAA,GAXhB;AAYH,CAbD;AAeA,IAAIE,WAAW,GAAG,CAAlB;AACA,IAAIC,aAAa,GAAG,EAApB;;AAEA,SAASC,iBAAT,GAA6B;AACzB,MAAMV,MAAM,GAAGV,QAAQ,CAACQ,cAAT,CAAwB,cAAxB,EAAwCK,KAAvD;;AACA,MAAI,CAACH,MAAL,EAAa;AACTW,IAAAA,KAAK,CAAC,yBAAD,CAAL;AACA;AACH;;AACDF,EAAAA,aAAa,GAAGT,MAAhB;AACAQ,EAAAA,WAAW,GAAG,CAAd;AACAI,EAAAA,YAAY,CAACZ,MAAD,EAASQ,WAAT,CAAZ;AACH;;AAED,SAAeI,YAAf,CAA4BZ,MAA5B,EAAoCa,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AACUC,UAAAA,cADV,GAC2BxB,QAAQ,CAACQ,cAAT,CAAwB,gBAAxB,CAD3B;AAEIgB,UAAAA,cAAc,CAACC,KAAf,CAAqBC,OAArB,GAA+B,OAA/B;AAFJ;AAAA;AAAA,0CAK+BxB,KAAK,CAAC,gBAAD,EAAmB;AAC3CyB,YAAAA,MAAM,EAAE,MADmC;AAE3CC,YAAAA,OAAO,EAAE;AACL,8BAAgB;AADX,aAFkC;AAK3CC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAErB,cAAAA,MAAM,EAAEA,MAAV;AAAkBsB,cAAAA,MAAM,EAAET;AAA1B,aAAf;AALqC,WAAnB,CALpC;;AAAA;AAKcnB,UAAAA,QALd;;AAAA,eAaYA,QAAQ,CAAC6B,EAbrB;AAAA;AAAA;AAAA;;AAAA;AAAA,0CAc+B7B,QAAQ,CAACC,IAAT,EAd/B;;AAAA;AAckBC,UAAAA,IAdlB;AAeY4B,UAAAA,cAAc,CAAC5B,IAAI,CAAC6B,KAAN,EAAa7B,IAAI,CAAC8B,UAAlB,CAAd;AAfZ;AAAA;;AAAA;AAiBYnB,UAAAA,OAAO,CAACD,KAAR,CAAc,qBAAd,EAAqCZ,QAAQ,CAACiC,MAA9C;AACArC,UAAAA,QAAQ,CAACQ,cAAT,CAAwB,SAAxB,EAAmC8B,SAAnC,GAA+C,qBAA/C;;AAlBZ;AAAA;AAAA;;AAAA;AAAA;AAAA;AAqBQrB,UAAAA,OAAO,CAACD,KAAR,CAAc,QAAd;AACAhB,UAAAA,QAAQ,CAACQ,cAAT,CAAwB,SAAxB,EAAmC8B,SAAnC,GAA+C,qBAA/C;;AAtBR;AAAA;AAwBQd,UAAAA,cAAc,CAACC,KAAf,CAAqBC,OAArB,GAA+B,MAA/B;AAxBR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA4BA,SAASQ,cAAT,CAAwBC,KAAxB,EAA+BC,UAA/B,EAA2C;AACvC,MAAMG,UAAU,GAAGvC,QAAQ,CAACQ,cAAT,CAAwB,SAAxB,CAAnB;AACA+B,EAAAA,UAAU,CAACD,SAAX,GAAuB,EAAvB;;AAEA,MAAIH,KAAK,CAACK,MAAN,GAAe,CAAnB,EAAsB;AAClB,QAAMC,IAAI,GAAGzC,QAAQ,CAACY,aAAT,CAAuB,IAAvB,CAAb;AACAuB,IAAAA,KAAK,CAAC1B,OAAN,CAAc,UAAAiC,IAAI,EAAI;AAClB,UAAMC,QAAQ,GAAG3C,QAAQ,CAACY,aAAT,CAAuB,IAAvB,CAAjB;AACA+B,MAAAA,QAAQ,CAACC,OAAT,CAAiBC,SAAjB,GAA6BH,IAAI,CAACG,SAAlC;AAEA,UAAMC,GAAG,GAAG9C,QAAQ,CAACY,aAAT,CAAuB,KAAvB,CAAZ;AACAkC,MAAAA,GAAG,CAACC,GAAJ,GAAUL,IAAI,CAACM,UAAL,IAAmB,0BAA7B;AACAF,MAAAA,GAAG,CAACG,GAAJ,GAAUP,IAAI,CAACQ,KAAL,IAAc,UAAxB;AACAJ,MAAAA,GAAG,CAACrB,KAAJ,CAAU0B,KAAV,GAAkB,OAAlB;AACAL,MAAAA,GAAG,CAACrB,KAAJ,CAAU2B,MAAV,GAAmB,OAAnB;AAEA,UAAMC,QAAQ,GAAGrD,QAAQ,CAACY,aAAT,CAAuB,KAAvB,CAAjB;AACAyC,MAAAA,QAAQ,CAACC,SAAT,GAAqB,WAArB;AACA,UAAMJ,KAAK,GAAGlD,QAAQ,CAACY,aAAT,CAAuB,IAAvB,CAAd;AACAsC,MAAAA,KAAK,CAACpC,WAAN,GAAoB4B,IAAI,CAACQ,KAAL,IAAc,UAAlC;AACA,UAAMK,IAAI,GAAGvD,QAAQ,CAACY,aAAT,CAAuB,GAAvB,CAAb;AACA2C,MAAAA,IAAI,CAACzC,WAAL,GAAmB4B,IAAI,CAACc,KAAL,IAAc,sBAAjC;AACA,UAAMC,WAAW,GAAGzD,QAAQ,CAACY,aAAT,CAAuB,GAAvB,CAApB;AACA6C,MAAAA,WAAW,CAAC3C,WAAZ,GAA0B4B,IAAI,CAACgB,QAAL,IAAiB,0BAA3C;AAEAL,MAAAA,QAAQ,CAACtC,WAAT,CAAqBmC,KAArB;AACAG,MAAAA,QAAQ,CAACtC,WAAT,CAAqBwC,IAArB;AACAF,MAAAA,QAAQ,CAACtC,WAAT,CAAqB0C,WAArB;AAEAd,MAAAA,QAAQ,CAAC5B,WAAT,CAAqB+B,GAArB;AACAH,MAAAA,QAAQ,CAAC5B,WAAT,CAAqBsC,QAArB;AACAV,MAAAA,QAAQ,CAAC1C,gBAAT,CAA0B,OAA1B,EAAmC,YAAM;AACrC0D,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,yCAAsDnB,IAAI,CAACG,SAA3D;AACH,OAFD;AAKAJ,MAAAA,IAAI,CAAC1B,WAAL,CAAiB4B,QAAjB;AACH,KA/BD;AAgCAJ,IAAAA,UAAU,CAACxB,WAAX,CAAuB0B,IAAvB;AACAqB,IAAAA,iBAAiB,CAAC1B,UAAD,CAAjB;AACH,GApCD,MAoCO;AACHG,IAAAA,UAAU,CAACD,SAAX,GAAuB,kBAAvB;AACH;AACJ;;AAED,SAASwB,iBAAT,CAA2B1B,UAA3B,EAAuC;AACnC,MAAM2B,aAAa,GAAG/D,QAAQ,CAACQ,cAAT,CAAwB,YAAxB,CAAtB;AACAuD,EAAAA,aAAa,CAACzB,SAAd,GAA0B,EAA1B;AAEA,MAAM0B,UAAU,GAAGC,IAAI,CAACC,IAAL,CAAU9B,UAAU,GAAG,CAAvB,CAAnB;AACA,MAAM+B,cAAc,GAAG,CAAvB;AACA,MAAIC,SAAS,GAAGlD,WAAW,GAAG+C,IAAI,CAACI,KAAL,CAAWF,cAAc,GAAG,CAA5B,CAA9B;AACAC,EAAAA,SAAS,GAAGH,IAAI,CAACK,GAAL,CAASF,SAAT,EAAoB,CAApB,CAAZ;AACA,MAAIG,OAAO,GAAGH,SAAS,GAAGD,cAAZ,GAA6B,CAA3C;AACAI,EAAAA,OAAO,GAAGN,IAAI,CAACO,GAAL,CAASD,OAAT,EAAkBP,UAAlB,CAAV;;AAEA,MAAII,SAAS,GAAG,CAAhB,EAAmB;AACf,QAAMK,UAAU,GAAGzE,QAAQ,CAACY,aAAT,CAAuB,QAAvB,CAAnB;AACA6D,IAAAA,UAAU,CAACnC,SAAX,GAAuB,SAAvB;AACAmC,IAAAA,UAAU,CAACnB,SAAX,GAAuB,OAAvB;AACAmB,IAAAA,UAAU,CAACxE,gBAAX,CAA4B,OAA5B,EAAqC,YAAM;AACvCiB,MAAAA,WAAW,GAAGkD,SAAS,GAAG,CAA1B;AACA9C,MAAAA,YAAY,CAACH,aAAD,EAAgBD,WAAhB,CAAZ;AACH,KAHD;AAIA6C,IAAAA,aAAa,CAAChD,WAAd,CAA0B0D,UAA1B;AACH;;AApBkC,6BAsB1BC,CAtB0B;AAuB/B,QAAMC,UAAU,GAAG3E,QAAQ,CAACY,aAAT,CAAuB,QAAvB,CAAnB;AACA+D,IAAAA,UAAU,CAAC7D,WAAX,GAAyB4D,CAAzB;AACAC,IAAAA,UAAU,CAAC1E,gBAAX,CAA4B,OAA5B,EAAqC,YAAM;AACvCiB,MAAAA,WAAW,GAAGwD,CAAd;AACApD,MAAAA,YAAY,CAACH,aAAD,EAAgBD,WAAhB,CAAZ;AACH,KAHD;;AAIA,QAAIwD,CAAC,KAAKxD,WAAV,EAAuB;AACnByD,MAAAA,UAAU,CAAClD,KAAX,CAAiBmD,eAAjB,GAAmC,SAAnC;AACH;;AACDb,IAAAA,aAAa,CAAChD,WAAd,CAA0B4D,UAA1B;AAhC+B;;AAsBnC,OAAK,IAAID,CAAC,GAAGN,SAAb,EAAwBM,CAAC,IAAIH,OAA7B,EAAsCG,CAAC,EAAvC,EAA2C;AAAA,UAAlCA,CAAkC;AAW1C;;AAED,MAAIH,OAAO,GAAGP,UAAd,EAA0B;AACtB,QAAMa,UAAU,GAAG7E,QAAQ,CAACY,aAAT,CAAuB,QAAvB,CAAnB;AACAiE,IAAAA,UAAU,CAACvC,SAAX,GAAuB,SAAvB;AACAuC,IAAAA,UAAU,CAACvB,SAAX,GAAuB,OAAvB;AACAuB,IAAAA,UAAU,CAAC5E,gBAAX,CAA4B,OAA5B,EAAqC,YAAM;AACvCiB,MAAAA,WAAW,GAAGqD,OAAO,GAAG,CAAxB;AACAjD,MAAAA,YAAY,CAACH,aAAD,EAAgBD,WAAhB,CAAZ;AACH,KAHD;AAIA6C,IAAAA,aAAa,CAAChD,WAAd,CAA0B8D,UAA1B;AACH;AACJ","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n    fetch('/area-codes')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            const regionSelect = document.getElementById('regionSelect');\r\n            data.forEach(region => {\r\n                const option = document.createElement('option');\r\n                option.value = region;\r\n                option.textContent = region;\r\n                regionSelect.appendChild(option);\r\n            });\r\n        })\r\n        .catch(error => console.error('Error fetching area codes:', error));\r\n});\r\n\r\nlet currentPage = 1;\r\nlet currentRegion = '';\r\n\r\nfunction fetchTouristSpots() {\r\n    const region = document.getElementById('regionSelect').value;\r\n    if (!region) {\r\n        alert('Please select a region.');\r\n        return;\r\n    }\r\n    currentRegion = region;\r\n    currentPage = 1;\r\n    searchRegion(region, currentPage);\r\n}\r\n\r\nasync function searchRegion(region, page) {\r\n    const loadingSpinner = document.getElementById('loadingSpinner');\r\n    loadingSpinner.style.display = 'block';\r\n\r\n    try {\r\n        const response = await fetch('/search-region', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ region: region, pageNo: page })\r\n        });\r\n\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            displayResults(data.items, data.totalCount);\r\n        } else {\r\n            console.error('Error fetching data', response.status);\r\n            document.getElementById('results').innerHTML = 'Error fetching data';\r\n        }\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n        document.getElementById('results').innerHTML = 'Error fetching data';\r\n    } finally {\r\n        loadingSpinner.style.display = 'none';\r\n    }\r\n}\r\n\r\nfunction displayResults(items, totalCount) {\r\n    const resultsDiv = document.getElementById('results');\r\n    resultsDiv.innerHTML = '';\r\n\r\n    if (items.length > 0) {\r\n        const list = document.createElement('ul');\r\n        items.forEach(item => {\r\n            const listItem = document.createElement('li');\r\n            listItem.dataset.contentid = item.contentid;\r\n\r\n            const img = document.createElement('img');\r\n            img.src = item.firstimage || 'images/default-image.jpg';\r\n            img.alt = item.title || 'No title';\r\n            img.style.width = '100px';\r\n            img.style.height = '100px';\r\n\r\n            const itemInfo = document.createElement('div');\r\n            itemInfo.className = 'item-info';\r\n            const title = document.createElement('h3');\r\n            title.textContent = item.title || 'No title';\r\n            const addr = document.createElement('p');\r\n            addr.textContent = item.addr1 || 'No address available';\r\n            const description = document.createElement('p');\r\n            description.textContent = item.overview || 'No description available';\r\n\r\n            itemInfo.appendChild(title);\r\n            itemInfo.appendChild(addr);\r\n            itemInfo.appendChild(description);\r\n\r\n            listItem.appendChild(img);\r\n            listItem.appendChild(itemInfo);\r\n            listItem.addEventListener('click', () => {\r\n                window.location.href = `tourist-spot.html?contentId=${item.contentid}`;\r\n            });\r\n            \r\n\r\n            list.appendChild(listItem);\r\n        });\r\n        resultsDiv.appendChild(list);\r\n        displayPagination(totalCount);\r\n    } else {\r\n        resultsDiv.innerHTML = 'No results found';\r\n    }\r\n}\r\n\r\nfunction displayPagination(totalCount) {\r\n    const paginationDiv = document.getElementById('pagination');\r\n    paginationDiv.innerHTML = '';\r\n\r\n    const totalPages = Math.ceil(totalCount / 5);\r\n    const maxPagesToShow = 5;\r\n    let startPage = currentPage - Math.floor(maxPagesToShow / 2);\r\n    startPage = Math.max(startPage, 1);\r\n    let endPage = startPage + maxPagesToShow - 1;\r\n    endPage = Math.min(endPage, totalPages);\r\n\r\n    if (startPage > 1) {\r\n        const prevButton = document.createElement('button');\r\n        prevButton.innerHTML = '&laquo;';\r\n        prevButton.className = 'arrow';\r\n        prevButton.addEventListener('click', () => {\r\n            currentPage = startPage - 1;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        paginationDiv.appendChild(prevButton);\r\n    }\r\n\r\n    for (let i = startPage; i <= endPage; i++) {\r\n        const pageButton = document.createElement('button');\r\n        pageButton.textContent = i;\r\n        pageButton.addEventListener('click', () => {\r\n            currentPage = i;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        if (i === currentPage) {\r\n            pageButton.style.backgroundColor = '#0056b3';\r\n        }\r\n        paginationDiv.appendChild(pageButton);\r\n    }\r\n\r\n    if (endPage < totalPages) {\r\n        const nextButton = document.createElement('button');\r\n        nextButton.innerHTML = '&raquo;';\r\n        nextButton.className = 'arrow';\r\n        nextButton.addEventListener('click', () => {\r\n            currentPage = endPage + 1;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        paginationDiv.appendChild(nextButton);\r\n    }\r\n}"],"file":"area-detail.dev.js"}