{"version":3,"sources":["area-detail.js"],"names":["document","addEventListener","fetch","response","json","then","data","getElementById","forEach","region","regionSelect","option","value","createElement","appendChild","error","console","currentPage","currentRegion","fetchTouristSpots","searchRegion","alert","page","style","display","method","headers","Content-Type","loadingSpinner","pageNo","ok","items","totalCount","status","innerHTML","displayResults","resultsDiv","length","list","item","listItem","dataset","contentid","img","src","firstimage","alt","title","width","height","itemInfo","className","textContent","addr","addr1","description","overview","window","location","href","concat","displayPagination","Math","floor","maxPagesToShow","endPage","totalPages","prevButton","_loop","pageButton","i","backgroundColor","paginationDiv","startPage"],"mappings":"aAAAA,SAASC,iBAAiB,mBAAoB,WAC1CC,MAAM,eADDD,KAAAA,SAAAA,GAAAA,OAAiBE,EAAAC,SAChBC,KAAA,SAAAC,GACgBH,IAAAA,EAAJH,SAAAO,eAAA,gBACRD,EAAAE,QAAI,SAAAC,GACAC,IAAYC,EAAWX,SAACO,cAAe,UAC7CI,EAAaC,MAAAH,EACGE,EAAGX,YAASa,EACjBD,EAAPE,YAAAH,OANZ,MAIQ,SAAAI,GAAA,OAAAC,QAAAD,MAAA,6BAAAA,OAOQ,IAXhBE,YAAA,EADJC,cAAA,GAgBA,SAAIA,oBAGA,IAAMT,EAAST,SAASO,eAAe,gBAAgBK,MADlDO,EAKJC,aAFGC,cAAMZ,EACNQ,YAAA,GAHER,MAAM,2BAMZQ,SAAWG,aAAXX,EAAAa,GAAAL,IAAAA,EAAAA,EAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OACAG,EAAqBH,SAArBV,eAAA,mBACHgB,MAAAC,QAAA,QAFGP,EAAAA,KAAAA,EAAAA,EAAAA,KAAAA,EAAAA,mBAAAA,MAIJf,MAAA,iBAAA,CAAAuB,OAAA,OAAAC,QAAA,CAAAC,eAAA,oBACUC,KAAAA,KAAAA,UAAiB5B,CAAQS,OAACF,EAAesB,OAAAP,OAL/CL,KAAAA,EAAAA,IAIJd,EAJIc,EAAAA,MAIJa,GAJIb,OAAAA,EAAAA,KAAAA,EAAAA,mBAAAA,MAIJd,EAAAC,QAJIa,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,EAUQQ,gBANZnB,EAJIW,EAAAA,MASmDc,MAAAzB,EAAA0B,YATnDf,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,GAYYD,QAAAD,MAAA,sBAAgBZ,EAAA8B,QADXjC,SAFkCO,eAAA,WAAA2B,UAAA,sBATnDjB,KAAAA,GAAAA,EAAAA,KAAAA,GAAAA,MAAAA,KAAAA,GAAAA,EAAAA,KAAAA,GAAAA,EAAAA,GAAAA,EAAAA,MAAAA,GAc+CY,QAAAA,MAAQP,SAARO,EAAAA,IAAlB7B,SAAfO,eAAA,WAAA2B,UAAA,sBAddjB,KAAAA,GAAAA,OAAAA,EAAAA,KAAAA,GA4BIW,EAAeL,MAAMC,QAAU,OA5BnCP,EAAAA,OAAAA,IAAAA,KAAAA,GAAAA,IAAAA,MAAAA,OAAAA,EAAAA,SAAAA,KAAAA,KAAAA,CAAAA,CAAAA,EAAAA,GAAAA,GAAAA,MAIJ,SAAAkB,eAaqBL,EAbrBE,GAAA,IAAAI,EAAApC,SAAAO,eAAA,WAgCI,GAhCJ6B,EAAAF,UAAA,GAgCuB,EAAfH,EAAMM,OAAY,CAhC1B,IAAAC,EAAAtC,SAAAa,cAAA,MAAAkB,EAAAvB,QAAA,SAAA+B,GAmCY,IAAMC,EAAWxC,SAASa,cAAc,MAnCpD2B,EAAAC,QAAAC,UAAAH,EAAAG,UAeYP,IAAAA,EAAcnC,SAAM+B,cAAYC,OAf5CW,EAAAC,IAAAL,EAAAM,YAAA,2BAAAF,EAAAG,IAAAP,EAAAQ,OAAA,WAyCYJ,EAAIpB,MAAMyB,MAAQ,QAzC9BL,EAAApB,MAAA0B,OAAA,QAkBYjD,IAAQkD,EAAC3C,SAAeM,cAAWqB,OA2BnCgB,EAASC,UAAY,YA7CjC,IAAAJ,EAAA/C,SAAAa,cAAA,MAAAkC,EAAAK,YAAAb,EAAAQ,OAAA,WAAA,IAAAM,EAAArD,SAAAa,cAAA,KAiDYwC,EAAKD,YAAcb,EAAKe,OAAS,uBAjD7C,IAAAC,EAAAvD,SAAAa,cAAA,KAAA0C,EAAAH,YAAAb,EAAAiB,UAAA,2BAqBQxC,EAAQD,YAARgC,GACA/C,EAASO,YAAT8C,GAiCIH,EAASpC,YAAYyC,GAvDjCf,EAAA1B,YAAA6B,GAwBQf,EAAAA,YAAqBJ,GAxB7BgB,EAAAvC,iBAAA,QAAA,WA4DgBwD,OAAOC,SAASC,KAAhB,+BAAAC,OAAsDrB,EAAKG,aA5D3EJ,EAAAxB,YAAA0B,KAAAJ,EAAAtB,YAAAwB,GAAAuB,kBAAA7B,QA4BAI,EAASD,UAAsBH,mBAI3B,SAAID,kBAAkBC,GAClB,IAAMM,EAAgBzB,SAAAA,eAAtB,cACAkB,EAAcG,UAAAK,GAEVC,IAAAA,EAAiBE,KAAAA,KAAjBV,EAAkCU,GAGlCC,EAAc1B,YAAJ6C,KAAmBC,MAAAC,KAE7BrB,GADAA,EAAUJ,KAAKQ,IAAAA,EAAS,IAFHlC,EAGrB,EAIAqC,GAHAP,EAAIpB,KAAM0B,IAAVgB,EAAAC,GAGSf,EAATD,EAASC,CACT,IAAMJ,EAAiBlC,SAAAA,cAAvB,UACAkC,EAAMK,UAAmBL,UACzBoB,EAAanE,UAASa,QACtBwC,EAAKD,iBAAc,QAAc,WAEjCG,aAAYH,cADNG,YAAcvD,EAASa,KAI7BqC,EAASpC,YAATqD,GAIA3B,IA1Bc,IAAA4B,EAAA,SA0Bd5B,GACAA,IAAQ6B,EAACpE,SAAiBY,cAAS,UAC/B4C,EAAOC,YAAPY,EADJD,EAAApE,iBAAA,QAAA,WAzBJmB,aAAAF,cA8BSJ,YAAY0B,KAGrBqB,IAAAA,cACGQ,EAAA9C,MAAAgD,gBAAA,WAENC,EAAA1D,YAAAuD,IAZO7B,EAAS1B,EAAYoC,GAAAA,EAArBoB,IAAAF,EAAA5B,GAeZ,GAAAyB,EAASJ,EAAkB7B,CACjBwC,IAAAA,EAAgBxE,SAASO,cAAe,UAC9CiE,EAActC,UAAd,UAEMgC,EAAaJ,UAAU9B,QACvBgC,EAAAA,iBAAN,QAAA,WAES5C,aAAYqD,cADjBA,YAAYxD,EAAkB,KAGlCgD,EAAmBA,YAASC","file":"area-detail.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n    fetch('/area-codes')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            const regionSelect = document.getElementById('regionSelect');\r\n            data.forEach(region => {\r\n                const option = document.createElement('option');\r\n                option.value = region;\r\n                option.textContent = region;\r\n                regionSelect.appendChild(option);\r\n            });\r\n        })\r\n        .catch(error => console.error('Error fetching area codes:', error));\r\n});\r\n\r\nlet currentPage = 1;\r\nlet currentRegion = '';\r\n\r\nfunction fetchTouristSpots() {\r\n    const region = document.getElementById('regionSelect').value;\r\n    if (!region) {\r\n        alert('Please select a region.');\r\n        return;\r\n    }\r\n    currentRegion = region;\r\n    currentPage = 1;\r\n    searchRegion(region, currentPage);\r\n}\r\n\r\nasync function searchRegion(region, page) {\r\n    const loadingSpinner = document.getElementById('loadingSpinner');\r\n    loadingSpinner.style.display = 'block';\r\n\r\n    try {\r\n        const response = await fetch('/search-region', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ region: region, pageNo: page })\r\n        });\r\n\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            displayResults(data.items, data.totalCount);\r\n        } else {\r\n            console.error('Error fetching data', response.status);\r\n            document.getElementById('results').innerHTML = 'Error fetching data';\r\n        }\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n        document.getElementById('results').innerHTML = 'Error fetching data';\r\n    } finally {\r\n        loadingSpinner.style.display = 'none';\r\n    }\r\n}\r\n\r\nfunction displayResults(items, totalCount) {\r\n    const resultsDiv = document.getElementById('results');\r\n    resultsDiv.innerHTML = '';\r\n\r\n    if (items.length > 0) {\r\n        const list = document.createElement('ul');\r\n        items.forEach(item => {\r\n            const listItem = document.createElement('li');\r\n            listItem.dataset.contentid = item.contentid;\r\n\r\n            const img = document.createElement('img');\r\n            img.src = item.firstimage || 'images/default-image.jpg';\r\n            img.alt = item.title || 'No title';\r\n            img.style.width = '100px';\r\n            img.style.height = '100px';\r\n\r\n            const itemInfo = document.createElement('div');\r\n            itemInfo.className = 'item-info';\r\n            const title = document.createElement('h3');\r\n            title.textContent = item.title || 'No title';\r\n            const addr = document.createElement('p');\r\n            addr.textContent = item.addr1 || 'No address available';\r\n            const description = document.createElement('p');\r\n            description.textContent = item.overview || 'No description available';\r\n\r\n            itemInfo.appendChild(title);\r\n            itemInfo.appendChild(addr);\r\n            itemInfo.appendChild(description);\r\n\r\n            listItem.appendChild(img);\r\n            listItem.appendChild(itemInfo);\r\n            listItem.addEventListener('click', () => {\r\n                window.location.href = `tourist-spot.html?contentId=${item.contentid}`;\r\n            });\r\n            \r\n\r\n            list.appendChild(listItem);\r\n        });\r\n        resultsDiv.appendChild(list);\r\n        displayPagination(totalCount);\r\n    } else {\r\n        resultsDiv.innerHTML = 'No results found';\r\n    }\r\n}\r\n\r\nfunction displayPagination(totalCount) {\r\n    const paginationDiv = document.getElementById('pagination');\r\n    paginationDiv.innerHTML = '';\r\n\r\n    const totalPages = Math.ceil(totalCount / 5);\r\n    const maxPagesToShow = 5;\r\n    let startPage = currentPage - Math.floor(maxPagesToShow / 2);\r\n    startPage = Math.max(startPage, 1);\r\n    let endPage = startPage + maxPagesToShow - 1;\r\n    endPage = Math.min(endPage, totalPages);\r\n\r\n    if (startPage > 1) {\r\n        const prevButton = document.createElement('button');\r\n        prevButton.innerHTML = '&laquo;';\r\n        prevButton.className = 'arrow';\r\n        prevButton.addEventListener('click', () => {\r\n            currentPage = startPage - 1;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        paginationDiv.appendChild(prevButton);\r\n    }\r\n\r\n    for (let i = startPage; i <= endPage; i++) {\r\n        const pageButton = document.createElement('button');\r\n        pageButton.textContent = i;\r\n        pageButton.addEventListener('click', () => {\r\n            currentPage = i;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        if (i === currentPage) {\r\n            pageButton.style.backgroundColor = '#0056b3';\r\n        }\r\n        paginationDiv.appendChild(pageButton);\r\n    }\r\n\r\n    if (endPage < totalPages) {\r\n        const nextButton = document.createElement('button');\r\n        nextButton.innerHTML = '&raquo;';\r\n        nextButton.className = 'arrow';\r\n        nextButton.addEventListener('click', () => {\r\n            currentPage = endPage + 1;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        paginationDiv.appendChild(nextButton);\r\n    }\r\n}"]}