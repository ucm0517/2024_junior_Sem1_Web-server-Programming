"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".dropdown-toggle"),t=sessionStorage.getItem("userId");t?a(t):console.error("사용자 ID가 없습니다."),e.forEach(function(e){e.addEventListener("mouseover",function(){var e=this.nextElementSibling;e&&e.classList.contains("nav-dropdown")&&(e.style.display="block")}),e.addEventListener("mouseout",function(){var e=this.nextElementSibling;e&&e.classList.contains("nav-dropdown")&&(e.style.display="none")})}),document.querySelectorAll(".nav-dropdown").forEach(function(e){e.addEventListener("mouseover",function(){this.style.display="block"}),e.addEventListener("mouseout",function(){this.style.display="none"})});var d=1,l="";function u(t,n){var o,r,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Searching for keyword: ".concat(t,", page: ").concat(n)),(o=document.getElementById("loadingSpinner")).style.display="block",e.prev=3,e.next=6,regeneratorRuntime.awrap(fetch("http://localhost:3000/search-keyword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:t,pageNo:n})}));case 6:if((r=e.sent).ok)return e.next=10,regeneratorRuntime.awrap(r.json());e.next=15;break;case 10:a=e.sent,console.log("Received data:",a),i(a),e.next=17;break;case 15:console.error("Error fetching data",r.status),document.getElementById("results").innerHTML="Error fetching data";case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(3),console.error("Error:",e.t0),document.getElementById("results").innerHTML="Error fetching data";case 23:return e.prev=23,o.style.display="none",e.finish(23);case 26:case"end":return e.stop()}},null,null,[[3,19,23,26]])}function i(e){var t=document.getElementById("results");if(t.innerHTML="",e.response&&e.response.body&&e.response.body.items){var n=e.response.body.items.item;if(n&&0<n.length){var c=document.createElement("ul");n.forEach(function(e){var t=document.createElement("li");t.classList.add("search-result-item");var n=document.createElement("img");n.src=e.firstimage||"default_image.png",n.alt=e.title;var o=document.createElement("div");o.className="item-info";var r=document.createElement("h3");r.textContent=e.title;var a=document.createElement("p");a.textContent=e.addr1;var i=document.createElement("p");i.textContent=e.overview||"No description available",o.appendChild(r),o.appendChild(a),o.appendChild(i),t.appendChild(n),t.appendChild(o),t.addEventListener("click",function(){return function(t){var n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching details for contentId: ".concat(t)),e.prev=1,e.next=4,regeneratorRuntime.awrap(fetch("http://localhost:3000/get-disability-info-and-images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentId:t})}));case 4:if((n=e.sent).ok)return e.next=8,regeneratorRuntime.awrap(n.json());e.next=14;break;case 8:o=e.sent,console.log("Received detail data:",o),localStorage.setItem("detailData",JSON.stringify(o)),window.location.href="details.html",e.next=16;break;case 14:console.error("Error fetching detail data",n.status),document.getElementById("detailsContent").innerHTML="Error fetching detail data";case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.error("Error:",e.t0),document.getElementById("detailsContent").innerHTML="Error fetching detail data";case 22:case"end":return e.stop()}},null,null,[[1,18]])}(e.contentid)}),c.appendChild(t)}),t.appendChild(c),function(e){var n=document.getElementById("pagination");n.innerHTML="";var t=Math.ceil(e/5),o=Math.max(1,d-2),r=Math.min(t,o+4);if(1<d){var a=document.createElement("button");a.innerHTML="&laquo;",a.className="arrow",a.addEventListener("click",function(){u(l,--d)}),n.appendChild(a)}for(var i=function(e){var t=document.createElement("button");t.textContent=e,t.addEventListener("click",function(){u(l,d=e)}),n.appendChild(t)},c=o;c<=r;c++)i(c);if(d<t){var s=document.createElement("button");s.innerHTML="&raquo;",s.className="arrow",s.addEventListener("click",function(){u(l,++d)}),n.appendChild(s)}}(e.response.body.totalCount)}else t.innerHTML="No results found"}else t.innerHTML="검색 결과가 없습니다."}document.getElementById("searchForm").addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("keyword").value;t?u(l=t,d=1):alert("Please enter a keyword.")});var n,o=sessionStorage.getItem("loggedIn"),r=sessionStorage.getItem("username");function a(e){fetch("/user-reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})}).then(function(e){return e.json()}).then(function(e){console.log("User Reviews:",e),e.success?function(e){var n=document.getElementById("userReviews");n.innerHTML="",e.forEach(function(e){var t=document.createElement("div");t.classList.add("review-item"),t.innerHTML="\n                <p>".concat(e.content,"</p>\n                ").concat(e.image?'<img src="/uploads/'.concat(e.image,'" alt="Review Image">'):"",'\n                <button onclick="editReview(').concat(e.id,')">수정</button>\n                <button onclick="deleteReview(').concat(e.id,')">삭제</button>\n            '),n.appendChild(t)})}(e.reviews):console.error("리뷰를 가져오는 중 오류가 발생했습니다.")}).catch(function(e){return console.error("Error:",e)})}o?(document.getElementById("login-link").style.display="none",document.getElementById("logout-link").style.display="inline",document.getElementById("mypage-link").style.display="inline",document.getElementById("mypage-link").textContent=r+"의 페이지",a(t),n=t,fetch("/user-comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n})}).then(function(e){return e.json()}).then(function(e){console.log("User Comments:",e);var n=document.getElementById("userComments");n.innerHTML="",e.comments.forEach(function(e){var t=document.createElement("div");t.className="comment",t.innerHTML="<p>".concat(e.content,"</p>"),n.appendChild(t)})}).catch(function(e){return console.error("Error:",e)})):(document.getElementById("login-link").style.display="inline",document.getElementById("logout-link").style.display="none",document.getElementById("mypage-link").style.display="none")});var quotes=["여행은 당신을 겸손하게 만든다. 세상에서 당신이 차지하는 위치가 얼마나 작은 것인지를 깨닫게 해준다. - 귀스타브 플로베르","여행을 떠나는 이유는 돌아오기 위해서이다. - 체 게바라","여행은 짧고, 인생은 더 짧다. - 공자","여행을 떠나는 순간, 새로운 인생이 시작된다. - 마크 트웨인","세상은 한 권의 책이며, 여행하지 않는 자는 그 책의 한 페이지만 읽는 것이다. - 성 아우구스티누스"];function showNewQuote(){var e=document.getElementById("quote"),t=Math.floor(Math.random()*quotes.length);e.innerText=quotes[t]}
//# sourceMappingURL=main.min.js.map
