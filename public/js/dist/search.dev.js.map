{"version":3,"sources":["search.js"],"names":[],"mappings":"AAAA","sourcesContent":["/*\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    const searchForm = document.getElementById('searchForm');\r\n    const resultsDiv = document.getElementById('results');\r\n    const loadingSpinner = document.getElementById('loadingSpinner');\r\n    const paginationDiv = document.getElementById('pagination');\r\n\r\n    searchForm.addEventListener('submit', async function(event) {\r\n        event.preventDefault();\r\n        const keyword = document.getElementById('keyword').value;\r\n        if (!keyword) {\r\n            alert('검색어를 입력해 주세요.');\r\n            return;\r\n        }\r\n\r\n        await searchKeyword(keyword, 1);\r\n    });\r\n\r\n    async function searchKeyword(keyword, pageNo) {\r\n        resultsDiv.innerHTML = '';\r\n        paginationDiv.innerHTML = '';\r\n        loadingSpinner.style.display = 'block';\r\n\r\n        try {\r\n            const response = await fetch('/search-keyword', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ keyword: keyword, pageNo: pageNo })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                displayResults(data.response.body.items.item, data.response.body.totalCount);\r\n            } else {\r\n                resultsDiv.innerHTML = 'Error fetching data';\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            resultsDiv.innerHTML = 'Error fetching data';\r\n        } finally {\r\n            loadingSpinner.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    function displayResults(items, totalCount) {\r\n        if (items.length > 0) {\r\n            const list = document.createElement('ul');\r\n            items.forEach(item => {\r\n                const listItem = document.createElement('li');\r\n                listItem.dataset.contentid = item.contentid;\r\n\r\n                const img = document.createElement('img');\r\n                img.src = item.firstimage || 'images/default-image.jpg';\r\n                img.alt = item.title || 'No title';\r\n                img.style.width = '100px';\r\n                img.style.height = '100px';\r\n\r\n                const itemInfo = document.createElement('div');\r\n                itemInfo.className = 'item-info';\r\n                const title = document.createElement('h3');\r\n                title.textContent = item.title || 'No title';\r\n                const addr = document.createElement('p');\r\n                addr.textContent = item.addr1 || 'No address available';\r\n                const description = document.createElement('p');\r\n                description.textContent = item.overview || 'No description available';\r\n\r\n                itemInfo.appendChild(title);\r\n                itemInfo.appendChild(addr);\r\n                itemInfo.appendChild(description);\r\n\r\n                listItem.appendChild(img);\r\n                listItem.appendChild(itemInfo);\r\n                listItem.addEventListener('click', () => {\r\n                    window.location.href = `details.html?contentId=${item.contentid}`;\r\n                });\r\n\r\n                list.appendChild(listItem);\r\n            });\r\n            resultsDiv.appendChild(list);\r\n            displayPagination(totalCount);\r\n        } else {\r\n            resultsDiv.innerHTML = 'No results found';\r\n        }\r\n    }\r\n\r\n    function displayPagination(totalCount) {\r\n        const totalPages = Math.ceil(totalCount / 5);\r\n        const maxPagesToShow = 5;\r\n        let startPage = currentPage - Math.floor(maxPagesToShow / 2);\r\n        startPage = Math.max(startPage, 1);\r\n        let endPage = startPage + maxPagesToShow - 1;\r\n        endPage = Math.min(endPage, totalPages);\r\n\r\n        if (startPage > 1) {\r\n            const prevButton = document.createElement('button');\r\n            prevButton.innerHTML = '&laquo;';\r\n            prevButton.className = 'arrow';\r\n            prevButton.addEventListener('click', () => {\r\n                currentPage = startPage - 1;\r\n                searchKeyword(currentKeyword, currentPage);\r\n            });\r\n            paginationDiv.appendChild(prevButton);\r\n        }\r\n\r\n        for (let i = startPage; i <= endPage; i++) {\r\n            const pageButton = document.createElement('button');\r\n            pageButton.textContent = i;\r\n            pageButton.addEventListener('click', () => {\r\n                currentPage = i;\r\n                searchKeyword(currentKeyword, currentPage);\r\n            });\r\n            if (i === currentPage) {\r\n                pageButton.style.backgroundColor = '#0056b3';\r\n            }\r\n            paginationDiv.appendChild(pageButton);\r\n        }\r\n\r\n        if (endPage < totalPages) {\r\n            const nextButton = document.createElement('button');\r\n            nextButton.innerHTML = '&raquo;';\r\n            nextButton.className = 'arrow';\r\n            nextButton.addEventListener('click', () => {\r\n                currentPage = endPage + 1;\r\n                searchKeyword(currentKeyword, currentPage);\r\n            });\r\n            paginationDiv.appendChild(nextButton);\r\n        }\r\n    }\r\n});\r\n\r\n*/"],"file":"search.dev.js"}