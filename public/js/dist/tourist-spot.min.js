"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],o=!0,a=!1,r=void 0;try{for(var c,i=e[Symbol.iterator]();!(o=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}document.addEventListener("DOMContentLoaded",function(){var c=new URLSearchParams(window.location.search),e=c.get("contentId"),t=getCookie("userId");console.log("ContentId:",e),console.log("UserId:",t),e?(Promise.all([fetch("/barrier-free-info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentId:e})}).then(function(e){return e.json()}),fetch("/get-disability-info-and-images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentId:e})}).then(function(e){return e.json()})]).then(function(e){var t=_slicedToArray(e,2);!function(e,t){var n=document.getElementById("detailContent");if(n.innerHTML="",e.response&&e.response.body&&e.response.body.items){var o=Array.isArray(e.response.body.items.item)?e.response.body.items.item[0]:e.response.body.items.item;if(o){var a=document.createElement("img");a.src=o.firstimage||"images/default-image.jpg",a.alt=o.title||"No title";var r=document.createElement("h2");r.textContent=o.title||"제목 없음";var c=document.createElement("p");c.textContent=o.addr1||"주소 없음";var i=document.createElement("p");i.textContent=o.overview||"No description available";var d=document.createElement("a"),p=(new DOMParser).parseFromString(o.homepage,"text/html"),l=p.querySelector("a")?p.querySelector("a").href:"#";d.href=l,d.textContent="홈페이지 이동",d.target="_blank",n.appendChild(a),n.appendChild(r),n.appendChild(c),n.appendChild(i),n.appendChild(d)}else n.innerHTML="No details available"}else n.innerHTML="No details available";if(t.disabilityInfo&&t.disabilityInfo.response.body.items.item){var s=t.disabilityInfo.response.body.items.item[0],m=document.createElement("div");m.classList.add("barrier-info"),m.innerHTML="\n                <h3>무장애 편의 정보</h3>\n                ".concat(s.wheelchair?"<p>휠체어: ".concat(s.wheelchair,"</p>"):"","\n                ").concat(s.exit?"<p>출구: ".concat(s.exit,"</p>"):"","\n                ").concat(s.elevator?"<p>엘리베이터: ".concat(s.elevator,"</p>"):"","\n                ").concat(s.restroom?"<p>장애인 화장실: ".concat(s.restroom,"</p>"):"","\n                ").concat(s.guidesystem?"<p>유도 시스템: ".concat(s.guidesystem,"</p>"):"","\n                ").concat(s.blindhandicapetc?"<p>시각 장애인 기타: ".concat(s.blindhandicapetc,"</p>"):"","\n                ").concat(s.signguide?"<p>표지판 안내: ".concat(s.signguide,"</p>"):"","\n                ").concat(s.videoguide?"<p>비디오 안내: ".concat(s.videoguide,"</p>"):"","\n                ").concat(s.hearingroom?"<p>청각 장애인 실: ".concat(s.hearingroom,"</p>"):"","\n                ").concat(s.hearinghandicapetc?"<p>청각 장애인 기타: ".concat(s.hearinghandicapetc,"</p>"):"","\n                ").concat(s.stroller?"<p>유모차: ".concat(s.stroller,"</p>"):"","\n                ").concat(s.nursingroom?"<p>수유실: ".concat(s.nursingroom,"</p>"):"","\n                ").concat(s.babysparechair?"<p>유아 보조 의자: ".concat(s.babysparechair,"</p>"):"","\n                ").concat(s.babycarriage?"<p>유아 및 가족 기타: ".concat(s.babycarriage,"</p>"):"","\n                ").concat(s.auditorium?"<p>강당: ".concat(s.auditorium,"</p>"):"","\n                ").concat(s.room?"<p>방: ".concat(s.room,"</p>"):"","\n                ").concat(s.other?"<p>기타 장애인 시설: ".concat(s.other,"</p>"):"","\n                ").concat(s.braileblock?"<p>점자 블록: ".concat(s.braileblock,"</p>"):"","\n                ").concat(s.blindhandicapetc?"<p>안내견: ".concat(s.blindhandicapetc,"</p>"):"","\n                ").concat(s.guidesystem?"<p>안내 인력: ".concat(s.guidesystem,"</p>"):"","\n                ").concat(s.audioguide?"<p>오디오 안내: ".concat(s.audioguide,"</p>"):"","\n                ").concat(s.largeprintguide?"<p>큰 글씨 안내: ".concat(s.largeprintguide,"</p>"):"","\n                ").concat(s.brailepromotionalmaterial?"<p>점자 홍보물: ".concat(s.brailepromotionalmaterial,"</p>"):"","\n                ").concat(s.parking?"<p>주차: ".concat(s.parking,"</p>"):"","\n                ").concat(s.route?"<p>경로: ".concat(s.route,"</p>"):"","\n                ").concat(s.publictransport?"<p>대중교통: ".concat(s.publictransport,"</p>"):"","\n                ").concat(s.ticketoffice?"<p>티켓 오피스: ".concat(s.ticketoffice,"</p>"):"","\n                ").concat(s.promotionalmaterial?"<p>홍보물: ".concat(s.promotionalmaterial,"</p>"):"","\n            "),n.appendChild(m)}else{var u=document.createElement("p");u.innerText="No barrier-free information available",n.appendChild(u)}if(t.images&&t.images.response.body.items.item){var g=document.createElement("div");g.className="image-gallery",t.images.response.body.items.item.forEach(function(e){var t=document.createElement("img");t.src=e.originimgurl,g.appendChild(t)}),n.appendChild(g)}else{var h=document.createElement("p");h.innerText="이미지 없음",n.appendChild(h)}}(t[0],t[1])}).catch(function(e){console.error("Error fetching data:",e),document.getElementById("detailContent").innerText="Error fetching data"}),document.getElementById("reviewForm").addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("reviewText").value,n=document.getElementById("reviewImage").files[0],o=getCookie("userId"),a=c.get("contentId");console.log("UserId:",o),console.log("SpotId:",a);var r=new FormData;r.append("userId",o),r.append("spotId",a),r.append("reviewText",t),n&&r.append("reviewImage",n),fetch("/submit-review",{method:"POST",body:r}).then(function(e){return e.json()}).then(function(e){e.success?(alert("리뷰가 제출되었습니다!"),location.reload()):alert("리뷰 제출에 실패했습니다.")}).catch(function(e){return console.error("Error:",e)})}),fetch("/reviews?contentId=".concat(e)).then(function(e){return e.json()}).then(function(e){e.success?function(e){var n=document.getElementById("reviewsContainer");n.innerHTML="",e.forEach(function(e){var t=document.createElement("div");t.classList.add("review-item"),t.innerHTML="\n                <p>".concat(e.user,": ").concat(e.content,"</p>\n                ").concat(e.image?'<img src="/uploads/'.concat(e.image,'" alt="Review Image">'):"",'\n                <form onsubmit="submitComment(event, ').concat(e.id,')">\n                    <input type="text" id="commentInput-').concat(e.id,'" placeholder="댓글 작성해 주세요..." required>\n                    <button type="submit">댓글 작성</button>\n                </form>\n                <div id="commentsContainer-').concat(e.id,'">\n                    ').concat(e.comments?e.comments.map(function(e){return"<p>".concat(e.user,": ").concat(e.content,"</p>")}).join(""):"","\n                </div>\n            "),n.appendChild(t)})}(e.reviews):document.getElementById("reviewsContainer").innerText="리뷰를 가져오는 중 오류가 발생했습니다."}).catch(function(e){return console.error("Error:",e)})):document.getElementById("detailContent").innerText="No content ID provided"});
//# sourceMappingURL=tourist-spot.min.js.map
