{"version":3,"sources":["tourist-spot.js"],"names":["document","addEventListener","urlParams","URLSearchParams","window","location","search","contentId","get","userId","getCookie","console","log","getElementById","innerText","Promise","all","fetch","method","headers","body","JSON","stringify","then","response","json","basicData","additionalData","displayDetails","error","detailsContent","innerHTML","items","item","Array","isArray","img","createElement","src","firstimage","alt","title","textContent","addr","addr1","description","overview","homepageLink","parser","DOMParser","doc","parseFromString","homepage","link","querySelector","href","target","appendChild","disabilityInfo","barrierInfo","classList","add","wheelchair","exit","elevator","restroom","guidesystem","blindhandicapetc","signguide","videoguide","hearingroom","hearinghandicapetc","stroller","nursingroom","babysparechair","babycarriage","auditorium","room","other","braileblock","audioguide","largeprintguide","brailepromotionalmaterial","parking","route","publictransport","ticketoffice","promotionalmaterial","noBarrierFreeInfo","images","imageGallery","className","forEach","imgElement","originimgurl","noImages","event","preventDefault","reviewText","value","reviewImage","files","spotId","formData","FormData","append","data","success","alert","reload","displayReviews","reviews","reviewsContainer","review","reviewDiv","user","content","image","id","comments","map","comment","join","submitComment","reviewId","commentInput","fetchComments","message","name","matches","cookie","match","RegExp","replace","decodeURIComponent","undefined"],"mappings":"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","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const contentId = urlParams.get('contentId');\r\n    const userId = getCookie('userId'); // 쿠키에서 userId 가져오기\r\n\r\n    console.log('ContentId:', contentId); // 디버깅 출력\r\n    console.log('UserId:', userId); // 디버깅 출력\r\n\r\n    if (!contentId) {\r\n        document.getElementById('detailContent').innerText = 'No content ID provided';\r\n        return;\r\n    }\r\n\r\n    // 두 API에서 데이터를 모두 가져오기\r\n    Promise.all([\r\n        fetch('/barrier-free-info', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ contentId: contentId })\r\n        }).then(response => response.json()),   \r\n        fetch('/get-disability-info-and-images', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ contentId: contentId })\r\n        }).then(response => response.json())\r\n    ])\r\n    .then(([basicData, additionalData]) => {\r\n        displayDetails(basicData, additionalData);\r\n    })\r\n    .catch(error => {\r\n        console.error('Error fetching data:', error);\r\n        document.getElementById('detailContent').innerText = 'Error fetching data';\r\n    });\r\n\r\n    function displayDetails(basicData, additionalData) {\r\n        const detailsContent = document.getElementById('detailContent');\r\n        detailsContent.innerHTML = ''; // Clear previous details\r\n\r\n        // 기본 데이터 처리\r\n        if (basicData.response && basicData.response.body && basicData.response.body.items) {\r\n            const item = Array.isArray(basicData.response.body.items.item) ? basicData.response.body.items.item[0] : basicData.response.body.items.item;\r\n            if (item) {\r\n                const img = document.createElement('img');\r\n                img.src = item.firstimage || 'images/default-image.jpg'; // Use default image\r\n                img.alt = item.title || 'No title';\r\n\r\n                const title = document.createElement('h2');\r\n                title.textContent = item.title || '제목 없음';\r\n\r\n                const addr = document.createElement('p');\r\n                addr.textContent = item.addr1 || '주소 없음';\r\n\r\n                const description = document.createElement('p');\r\n                description.textContent = item.overview || 'No description available';\r\n\r\n                const homepageLink = document.createElement('a');\r\n                const parser = new DOMParser();\r\n                const doc = parser.parseFromString(item.homepage, 'text/html');\r\n                const link = doc.querySelector('a') ? doc.querySelector('a').href : '#';\r\n                homepageLink.href = link;\r\n                homepageLink.textContent = '홈페이지 이동';\r\n                homepageLink.target = '_blank';\r\n\r\n                detailsContent.appendChild(img);\r\n                detailsContent.appendChild(title);\r\n                detailsContent.appendChild(addr);\r\n                detailsContent.appendChild(description);\r\n                detailsContent.appendChild(homepageLink);\r\n            } else {\r\n                detailsContent.innerHTML = 'No details available';\r\n            }\r\n        } else {\r\n            detailsContent.innerHTML = 'No details available';\r\n        }\r\n\r\n        // 추가 데이터 처리\r\n        if (additionalData.disabilityInfo && additionalData.disabilityInfo.response.body.items.item) {\r\n            const item = additionalData.disabilityInfo.response.body.items.item[0];\r\n\r\n            const barrierInfo = document.createElement('div');\r\n            barrierInfo.classList.add('barrier-info');\r\n            barrierInfo.innerHTML = `\r\n                <h3>무장애 편의 정보</h3>\r\n                ${item.wheelchair ? `<p>휠체어: ${item.wheelchair}</p>` : ''}\r\n                ${item.exit ? `<p>출구: ${item.exit}</p>` : ''}\r\n                ${item.elevator ? `<p>엘리베이터: ${item.elevator}</p>` : ''}\r\n                ${item.restroom ? `<p>장애인 화장실: ${item.restroom}</p>` : ''}\r\n                ${item.guidesystem ? `<p>유도 시스템: ${item.guidesystem}</p>` : ''}\r\n                ${item.blindhandicapetc ? `<p>시각 장애인 기타: ${item.blindhandicapetc}</p>` : ''}\r\n                ${item.signguide ? `<p>표지판 안내: ${item.signguide}</p>` : ''}\r\n                ${item.videoguide ? `<p>비디오 안내: ${item.videoguide}</p>` : ''}\r\n                ${item.hearingroom ? `<p>청각 장애인 실: ${item.hearingroom}</p>` : ''}\r\n                ${item.hearinghandicapetc ? `<p>청각 장애인 기타: ${item.hearinghandicapetc}</p>` : ''}\r\n                ${item.stroller ? `<p>유모차: ${item.stroller}</p>` : ''}\r\n                ${item.nursingroom ? `<p>수유실: ${item.nursingroom}</p>` : ''}\r\n                ${item.babysparechair ? `<p>유아 보조 의자: ${item.babysparechair}</p>` : ''}\r\n                ${item.babycarriage ? `<p>유아 및 가족 기타: ${item.babycarriage}</p>` : ''}\r\n                ${item.auditorium ? `<p>강당: ${item.auditorium}</p>` : ''}\r\n                ${item.room ? `<p>방: ${item.room}</p>` : ''}\r\n                ${item.other ? `<p>기타 장애인 시설: ${item.other}</p>` : ''}\r\n                ${item.braileblock ? `<p>점자 블록: ${item.braileblock}</p>` : ''}\r\n                ${item.blindhandicapetc ? `<p>안내견: ${item.blindhandicapetc}</p>` : ''}\r\n                ${item.guidesystem ? `<p>안내 인력: ${item.guidesystem}</p>` : ''}\r\n                ${item.audioguide ? `<p>오디오 안내: ${item.audioguide}</p>` : ''}\r\n                ${item.largeprintguide ? `<p>큰 글씨 안내: ${item.largeprintguide}</p>` : ''}\r\n                ${item.brailepromotionalmaterial ? `<p>점자 홍보물: ${item.brailepromotionalmaterial}</p>` : ''}\r\n                ${item.parking ? `<p>주차: ${item.parking}</p>` : ''}\r\n                ${item.route ? `<p>경로: ${item.route}</p>` : ''}\r\n                ${item.publictransport ? `<p>대중교통: ${item.publictransport}</p>` : ''}\r\n                ${item.ticketoffice ? `<p>티켓 오피스: ${item.ticketoffice}</p>` : ''}\r\n                ${item.promotionalmaterial ? `<p>홍보물: ${item.promotionalmaterial}</p>` : ''}\r\n            `;\r\n            detailsContent.appendChild(barrierInfo);\r\n        } else {\r\n            const noBarrierFreeInfo = document.createElement('p');\r\n            noBarrierFreeInfo.innerText = 'No barrier-free information available';\r\n            detailsContent.appendChild(noBarrierFreeInfo);\r\n        }\r\n\r\n        // 이미지 갤러리 추가\r\n        if (additionalData.images && additionalData.images.response.body.items.item) {\r\n            const imageGallery = document.createElement('div');\r\n            imageGallery.className = 'image-gallery';\r\n            additionalData.images.response.body.items.item.forEach(img => {\r\n                const imgElement = document.createElement('img');\r\n                imgElement.src = img.originimgurl;\r\n                imageGallery.appendChild(imgElement);\r\n            });\r\n            detailsContent.appendChild(imageGallery);\r\n        } else {\r\n            const noImages = document.createElement('p');\r\n            noImages.innerText = '이미지 없음';\r\n            detailsContent.appendChild(noImages);\r\n        }\r\n    }\r\n\r\n    // 리뷰 제출 기능\r\n    document.getElementById('reviewForm').addEventListener('submit', function(event) {\r\n        event.preventDefault();\r\n        const reviewText = document.getElementById('reviewText').value;\r\n        const reviewImage = document.getElementById('reviewImage').files[0];\r\n        const userId = getCookie('userId'); // 세션에서 userId 가져오기\r\n        const spotId = urlParams.get('contentId'); // URL에서 contentId 가져오기\r\n        console.log('UserId:', userId); // 디버깅 출력\r\n        console.log('SpotId:', spotId); // 디버깅 출력\r\n        const formData = new FormData();\r\n        formData.append('userId', userId);\r\n        formData.append('spotId', spotId);\r\n        formData.append('reviewText', reviewText);\r\n        if (reviewImage) {\r\n            formData.append('reviewImage', reviewImage);\r\n        }\r\n\r\n        fetch('/submit-review', {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.success) {\r\n                alert('리뷰가 제출되었습니다!');\r\n                location.reload(); // 새 리뷰를 표시하기 위해 페이지 새로고침\r\n            } else {\r\n                alert('리뷰 제출에 실패했습니다.');\r\n            }\r\n        })\r\n        .catch(error => console.error('Error:', error));\r\n    });\r\n\r\n    // 리뷰 가져오기 기능\r\n    fetch(`/reviews?contentId=${contentId}`)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.success) {\r\n                displayReviews(data.reviews);\r\n            } else {\r\n                document.getElementById('reviewsContainer').innerText = '리뷰를 가져오는 중 오류가 발생했습니다.';\r\n            }\r\n        })\r\n        .catch(error => console.error('Error:', error));\r\n\r\n    function displayReviews(reviews) {\r\n        const reviewsContainer = document.getElementById('reviewsContainer');\r\n        reviewsContainer.innerHTML = '';\r\n        reviews.forEach(review => {\r\n            const reviewDiv = document.createElement('div');\r\n            reviewDiv.classList.add('review-item');\r\n            reviewDiv.innerHTML = `\r\n                <p>${review.user}: ${review.content}</p>\r\n                ${review.image ? `<img src=\"/uploads/${review.image}\" alt=\"Review Image\">` : ''}\r\n                <form onsubmit=\"submitComment(event, ${review.id})\">\r\n                    <input type=\"text\" id=\"commentInput-${review.id}\" placeholder=\"댓글 작성해 주세요...\" required>\r\n                    <button type=\"submit\">댓글 작성</button>\r\n                </form>\r\n                <div id=\"commentsContainer-${review.id}\">\r\n                    ${review.comments ? review.comments.map(comment => `<p>${comment.user}: ${comment.content}</p>`).join('') : ''}\r\n                </div>\r\n            `;\r\n            reviewsContainer.appendChild(reviewDiv);\r\n        });\r\n    }\r\n\r\n    function submitComment(event, reviewId) {\r\n        event.preventDefault(); // 폼 제출 시 페이지 리로드 방지\r\n        const commentInput = document.getElementById(`commentInput-${reviewId}`);\r\n        const comment = commentInput.value;\r\n        const userId = getCookie('userId'); // 사용자 ID 가져오기\r\n\r\n        fetch('/submit-comment', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ reviewId: reviewId, userId: userId, comment: comment })\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.success) {\r\n                alert('댓글 작성이 완료되었습니다!');\r\n                commentInput.value = ''; // 입력 필드 초기화\r\n                fetchComments(reviewId); // 댓글 목록 새로고침\r\n            } else {\r\n                alert('댓글 작성에 실패했습니다: ' + data.message);\r\n            }\r\n        })\r\n        .catch(error => console.error('Error:', error));\r\n    }\r\n\r\n});\r\n\r\n// 쿠키 가져오기 함수 추가\r\nfunction getCookie(name) {\r\n    let matches = document.cookie.match(new RegExp(\r\n        \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\r\n    ));\r\n    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}"],"file":"tourist-spot.dev.js"}