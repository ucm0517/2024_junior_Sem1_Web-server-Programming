{"version":3,"sources":["area.js"],"names":["document","addEventListener","URLSearchParams","window","location","search","get","region","getElementById","regionSelect","value","currentPage","fetchTouristSpots","searchRegion","currentRegion","alert","page","loadingSpinner","style","display","fetch","method","headers","Content-Type","pageNo","response","ok","json","data","items","totalCount","console","error","status","body","JSON","innerHTML","_context","t0","displayResults","resultsDiv","length","list","createElement","forEach","item","listItem","dataset","contentid","img","src","firstimage","alt","title","width","itemInfo","className","textContent","addr","addr1","description","overview","appendChild","href","concat","displayPagination","paginationDiv","Math","floor","maxPagesToShow","max","startPage","endPage","min","prevButton","_loop","pageButton","i","backgroundColor","totalPages","nextButton"],"mappings":"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","file":"area.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const region = urlParams.get('region');\r\n\r\n    const regionSelect = document.getElementById('regionSelect');\r\n    if (region) {\r\n        regionSelect.value = region;\r\n        fetchTouristSpots();\r\n    }\r\n});\r\n\r\nlet currentPage = 1;\r\nlet currentRegion = '';\r\n\r\nfunction fetchTouristSpots() {\r\n    const region = document.getElementById('regionSelect').value;\r\n    if (!region) {\r\n        alert('Please select a region.');\r\n        return;\r\n    }\r\n    currentRegion = region;\r\n    currentPage = 1;\r\n    searchRegion(region, currentPage);\r\n}\r\n\r\nasync function searchRegion(region, page) {\r\n    const loadingSpinner = document.getElementById('loadingSpinner');\r\n    loadingSpinner.style.display = 'block';\r\n\r\n    try {\r\n        const response = await fetch('/search-region', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ region: region, pageNo: page })\r\n        });\r\n\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            displayResults(data.items, data.totalCount);\r\n        } else {\r\n            console.error('Error fetching data', response.status);\r\n            document.getElementById('results').innerHTML = 'Error fetching data';\r\n        }\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n        document.getElementById('results').innerHTML = 'Error fetching data';\r\n    } finally {\r\n        loadingSpinner.style.display = 'none';\r\n    }\r\n}\r\n\r\nfunction displayResults(items, totalCount) {\r\n    const resultsDiv = document.getElementById('results');\r\n    resultsDiv.innerHTML = '';\r\n\r\n    if (items.length > 0) {\r\n        const list = document.createElement('ul');\r\n        items.forEach(item => {\r\n            const listItem = document.createElement('li');\r\n            listItem.dataset.contentid = item.contentid;\r\n\r\n            const img = document.createElement('img');\r\n            img.src = item.firstimage || 'images/default-image.jpg';\r\n            img.alt = item.title || 'No title';\r\n            img.style.width = '100px';\r\n            img.style.height = '100px';\r\n\r\n            const itemInfo = document.createElement('div');\r\n            itemInfo.className = 'item-info';\r\n            const title = document.createElement('h3');\r\n            title.textContent = item.title || 'No title';\r\n            const addr = document.createElement('p');\r\n            addr.textContent = item.addr1 || 'No address available';\r\n            const description = document.createElement('p');\r\n            description.textContent = item.overview || 'No description available';\r\n\r\n            itemInfo.appendChild(title);\r\n            itemInfo.appendChild(addr);\r\n            itemInfo.appendChild(description);\r\n\r\n            listItem.appendChild(img);\r\n            listItem.appendChild(itemInfo);\r\n            listItem.addEventListener('click', () => {\r\n                window.location.href = `tourist-spot.html?contentId=${item.contentid}`;\r\n            });\r\n            \r\n\r\n            list.appendChild(listItem);\r\n        });\r\n        resultsDiv.appendChild(list);\r\n        displayPagination(totalCount);\r\n    } else {\r\n        resultsDiv.innerHTML = 'No results found';\r\n    }\r\n}\r\n\r\nfunction displayPagination(totalCount) {\r\n    const paginationDiv = document.getElementById('pagination');\r\n    paginationDiv.innerHTML = '';\r\n\r\n    const totalPages = Math.ceil(totalCount / 5);\r\n    const maxPagesToShow = 5;\r\n    let startPage = currentPage - Math.floor(maxPagesToShow / 2);\r\n    startPage = Math.max(startPage, 1);\r\n    let endPage = startPage + maxPagesToShow - 1;\r\n    endPage = Math.min(endPage, totalPages);\r\n\r\n    if (startPage > 1) {\r\n        const prevButton = document.createElement('button');\r\n        prevButton.innerHTML = '&laquo;';\r\n        prevButton.className = 'arrow';\r\n        prevButton.addEventListener('click', () => {\r\n            currentPage = startPage - 1;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        paginationDiv.appendChild(prevButton);\r\n    }\r\n\r\n    for (let i = startPage; i <= endPage; i++) {\r\n        const pageButton = document.createElement('button');\r\n        pageButton.textContent = i;\r\n        pageButton.addEventListener('click', () => {\r\n            currentPage = i;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        if (i === currentPage) {\r\n            pageButton.style.backgroundColor = '#0056b3';\r\n        }\r\n        paginationDiv.appendChild(pageButton);\r\n    }\r\n\r\n    if (endPage < totalPages) {\r\n        const nextButton = document.createElement('button');\r\n        nextButton.innerHTML = '&raquo;';\r\n        nextButton.className = 'arrow';\r\n        nextButton.addEventListener('click', () => {\r\n            currentPage = endPage + 1;\r\n            searchRegion(currentRegion, currentPage);\r\n        });\r\n        paginationDiv.appendChild(nextButton);\r\n    }\r\n}"]}