{"version":3,"sources":["search-results.js"],"names":["document","addEventListener","urlParams","URLSearchParams","window","location","search","keyword","get","resultsDiv","getElementById","loadingSpinner","paginationDiv","currentPage","innerHTML","searchKeyword","pageNo","style","display","console","log","fetch","method","headers","body","JSON","stringify","response","ok","json","data","items","item","displayResults","totalCount","error","length","list","createElement","forEach","listItem","dataset","contentid","img","src","firstimage","alt","title","width","height","itemInfo","className","textContent","addr","addr1","description","overview","appendChild","href","displayPagination","totalPages","Math","ceil","maxPagesToShow","startPage","floor","max","endPage","min","prevButton","i","pageButton","backgroundColor","nextButton"],"mappings":"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","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const keyword = urlParams.get('keyword');\r\n    const resultsDiv = document.getElementById('results');\r\n    const loadingSpinner = document.getElementById('loadingSpinner');\r\n    const paginationDiv = document.getElementById('pagination');\r\n    let currentPage = 1;\r\n\r\n    if (!keyword) {\r\n        resultsDiv.innerHTML = '검색어가 제공되지 않았습니다.';\r\n        return;\r\n    }\r\n\r\n    searchKeyword(keyword, currentPage);\r\n\r\n    async function searchKeyword(keyword, pageNo) {\r\n        resultsDiv.innerHTML = '';\r\n        paginationDiv.innerHTML = '';\r\n        loadingSpinner.style.display = 'block';\r\n\r\n        console.log(`Searching for keyword: ${keyword}, page: ${pageNo}`); // 추가된 로그\r\n\r\n        try {\r\n            const response = await fetch('/search-keyword', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ keyword: keyword, pageNo: pageNo })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                console.log(`Search results: ${JSON.stringify(data)}`); // 추가된 로그\r\n                if (data.response && data.response.body && data.response.body.items && data.response.body.items.item) {\r\n                    displayResults(data.response.body.items.item, data.response.body.totalCount);\r\n                } else {\r\n                    resultsDiv.innerHTML = 'No results found';\r\n                }\r\n            } else {\r\n                resultsDiv.innerHTML = 'Error fetching data';\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error); // 추가된 로그\r\n            resultsDiv.innerHTML = 'Error fetching data';\r\n        } finally {\r\n            loadingSpinner.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    function displayResults(items, totalCount) {\r\n        if (items.length > 0) {\r\n            const list = document.createElement('ul');\r\n            items.forEach(item => {\r\n                const listItem = document.createElement('li');\r\n                listItem.dataset.contentid = item.contentid;\r\n\r\n                const img = document.createElement('img');\r\n                img.src = item.firstimage || 'images/default-image.jpg';\r\n                img.alt = item.title || 'No title';\r\n                img.style.width = '100px';\r\n                img.style.height = '100px';\r\n\r\n                const itemInfo = document.createElement('div');\r\n                itemInfo.className = 'item-info';\r\n                const title = document.createElement('h3');\r\n                title.textContent = item.title || 'No title';\r\n                const addr = document.createElement('p');\r\n                addr.textContent = item.addr1 || 'No address available';\r\n                const description = document.createElement('p');\r\n                description.textContent = item.overview || 'No description available';\r\n\r\n                itemInfo.appendChild(title);\r\n                itemInfo.appendChild(addr);\r\n                itemInfo.appendChild(description);\r\n\r\n                listItem.appendChild(img);\r\n                listItem.appendChild(itemInfo);\r\n                listItem.addEventListener('click', () => {\r\n                    window.location.href = `details.html?contentId=${item.contentid}`;\r\n                });\r\n\r\n                list.appendChild(listItem);\r\n            });\r\n            resultsDiv.appendChild(list);\r\n            displayPagination(totalCount);\r\n        } else {\r\n            resultsDiv.innerHTML = 'No results found';\r\n        }\r\n    }\r\n\r\n    function displayPagination(totalCount) {\r\n        const totalPages = Math.ceil(totalCount / 5);\r\n        const maxPagesToShow = 5;\r\n        let startPage = currentPage - Math.floor(maxPagesToShow / 2);\r\n        startPage = Math.max(startPage, 1);\r\n        let endPage = startPage + maxPagesToShow - 1;\r\n        endPage = Math.min(endPage, totalPages);\r\n\r\n        if (startPage > 1) {\r\n            const prevButton = document.createElement('button');\r\n            prevButton.innerHTML = '&laquo;';\r\n            prevButton.className = 'arrow';\r\n            prevButton.addEventListener('click', () => {\r\n                currentPage = startPage - 1;\r\n                searchKeyword(keyword, currentPage);\r\n            });\r\n            paginationDiv.appendChild(prevButton);\r\n        }\r\n\r\n        for (let i = startPage; i <= endPage; i++) {\r\n            const pageButton = document.createElement('button');\r\n            pageButton.textContent = i;\r\n            pageButton.addEventListener('click', () => {\r\n                currentPage = i;\r\n                searchKeyword(keyword, currentPage);\r\n            });\r\n            if (i === currentPage) {\r\n                pageButton.style.backgroundColor = '#0056b3';\r\n            }\r\n            paginationDiv.appendChild(pageButton);\r\n        }\r\n\r\n        if (endPage < totalPages) {\r\n            const nextButton = document.createElement('button');\r\n            nextButton.innerHTML = '&raquo;';\r\n            nextButton.className = 'arrow';\r\n            nextButton.addEventListener('click', () => {\r\n                currentPage = endPage + 1;\r\n                searchKeyword(keyword, currentPage);\r\n            });\r\n            paginationDiv.appendChild(nextButton);\r\n        }\r\n    }\r\n});"],"file":"search-results.dev.js"}