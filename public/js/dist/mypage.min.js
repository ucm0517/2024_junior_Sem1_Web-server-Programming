"use strict";function fetchUserReviews(e){fetch("/user-reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})}).then(function(e){return e.json()}).then(function(e){e.success?displayUserReviews(e.reviews):console.error("리뷰를 가져오는 중 오류가 발생했습니다.")}).catch(function(e){return console.error("Error:",e)})}function displayUserReviews(e){var t=document.getElementById("userReviews");t.innerHTML="",e.forEach(function(e){var n=document.createElement("div");n.classList.add("review-item"),n.innerHTML="\n            <p>".concat(e.content,"</p>\n            ").concat(e.image?'<img src="/uploads/'.concat(e.image,'" alt="Review Image">'):"",'\n            <button onclick="editReview(').concat(e.id,')">수정</button>\n            <button onclick="deleteReview(').concat(e.id,')">삭제</button>\n            <button onclick="likeReview(').concat(e.id,')">좋아요</button> \x3c!-- 좋아요 버튼 추가 --\x3e\n            <span id="likeCount-').concat(e.id,'">').concat(e.likes,"</span> \x3c!-- 좋아요 개수 표시 --\x3e\n        "),t.appendChild(n)})}function editReview(e){var n=prompt("새로운 리뷰 내용을 입력하세요:");n&&fetch("/edit-review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:e,newContent:n})}).then(function(e){return e.json()}).then(function(e){e.success?(alert("리뷰가 성공적으로 수정되었습니다."),fetchUserReviews(sessionStorage.getItem("userId"))):alert("리뷰 수정에 실패했습니다: "+e.message)}).catch(function(e){return console.error("Error:",e)})}function deleteReview(e){confirm("정말 이 리뷰를 삭제하시겠습니까?")&&fetch("/delete-review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:e})}).then(function(e){return e.json()}).then(function(e){e.success?(alert("리뷰가 성공적으로 삭제되었습니다."),fetchUserReviews(sessionStorage.getItem("userId"))):alert("리뷰 삭제에 실패했습니다: "+e.message)}).catch(function(e){return console.error("Error:",e)})}function likeReview(n){var e=sessionStorage.getItem("userId");e?fetch("/like-review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reviewId:n,userId:e})}).then(function(e){return e.json()}).then(function(e){e.success?document.getElementById("likeCount-".concat(n)).textContent=e.likes:alert("좋아요를 누르는데 실패했습니다.")}).catch(function(e){return console.error("Error:",e)}):alert("로그인이 필요합니다.")}function fetchUserComments(e){fetch("/user-comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})}).then(function(e){return e.json()}).then(function(e){var t=document.getElementById("userComments");t.innerHTML="",e.comments.forEach(function(e){var n=document.createElement("div");n.className="comment",n.innerHTML="<p>".concat(e.content,"</p>"),t.appendChild(n)})}).catch(function(e){return console.error("Error:",e)})}function deleteAccount(){confirm("정말로 회원 탈퇴하시겠습니까?")&&fetch("/delete-account",{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(e){e.ok?(alert("회원 탈퇴가 완료되었습니다."),sessionStorage.removeItem("loggedIn"),sessionStorage.removeItem("username"),sessionStorage.removeItem("userId"),window.location.href="index.html"):alert("회원 탈퇴 중 오류가 발생했습니다.")}).catch(function(e){return console.error("Error:",e)})}function logout(){sessionStorage.removeItem("loggedIn"),sessionStorage.removeItem("username"),sessionStorage.removeItem("userId"),window.location.href="index.html"}function getCookie(e){var n=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return n?decodeURIComponent(n[1]):void 0}document.addEventListener("DOMContentLoaded",function(){var e=sessionStorage.getItem("userId");e?(fetchUserReviews(e),fetchUserComments(e)):console.error("사용자 ID가 없습니다.")});
//# sourceMappingURL=mypage.min.js.map
